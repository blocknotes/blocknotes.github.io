<!DOCTYPE html>
<html lang="en">
<!-- Beautiful Jekyll 5.0.0 | Copyright Dean Attali 2020 -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  

  

  <title>Vagrant Rails 6 dev environment setup</title>

  <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,400&display=swap" rel="stylesheet">


  
  <meta name="author" content="Mattia Roccoberton">
  

  <meta name="description" content="Good news, everyone! Recently I made some experiments to setup a Rails 6 dev environment using Vagrant. I started from rails/rails-dev-box and applied some changes. VM Setup These are the features of the Vagrant file that I’m using: Ubuntu 18.04 LTS box; ability to install different ruby versions; project files...">

  

  
  <meta name="keywords" content="ruby on rails,ruby language,development">
  

  <link rel="alternate" type="application/rss+xml" title="blocknot.es" href="https://www.blocknot.es/feed.xml">

  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-39592458-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-39592458-1');
</script>


  

  


  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
      
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css">


    
  

  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
    
      <link rel="stylesheet" href="/assets/css/beautifuljekyll.css">
    
      <link rel="stylesheet" href="/assets/css/main.css">
    
  

  

  
  
  

  

  
  <meta property="og:site_name" content="blocknot.es">
  <meta property="og:title" content="Vagrant Rails 6 dev environment setup">
  <meta property="og:description" content="Good news, everyone! Recently I made some experiments to setup a Rails 6 dev environment using Vagrant. I started from rails/rails-dev-box and applied some changes. VM Setup These are the features of the Vagrant file that I’m using: Ubuntu 18.04 LTS box; ability to install different ruby versions; project files...">

  
  <meta property="og:image" content="https://www.blocknot.es/assets/img/logo_sm.png">
  

  
  <meta property="og:type" content="article">
  <meta property="og:article:author" content="Mattia Roccoberton">
  <meta property="og:article:published_time" content="2021-01-05T00:00:00+01:00">
  <meta property="og:url" content="https://www.blocknot.es/2021-01-05-vagrant-rails-6-dev-environment/">
  <link rel="canonical" href="https://www.blocknot.es/2021-01-05-vagrant-rails-6-dev-environment/">
  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@too_sleepy">
  <meta name="twitter:creator" content="@too_sleepy">

  <meta property="twitter:title" content="Vagrant Rails 6 dev environment setup">
  <meta property="twitter:description" content="Good news, everyone! Recently I made some experiments to setup a Rails 6 dev environment using Vagrant. I started from rails/rails-dev-box and applied some changes. VM Setup These are the features of the Vagrant file that I’m using: Ubuntu 18.04 LTS box; ability to install different ruby versions; project files...">

  
  <meta name="twitter:image" content="https://www.blocknot.es/assets/img/logo_sm.png">
  

  


  

  
</head>


<body>

  


  <nav class="navbar navbar-expand-xl navbar-light fixed-top navbar-custom top-nav-regular"><a class="navbar-brand" href="https://www.blocknot.es/">blocknot.es</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">My projects</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="https://github.com/blocknotes?utf8=%E2%9C%93&tab=repositories&type=source">Github projects</a>
                  <a class="dropdown-item" href="/ruby/gems">Ruby gems</a>
                  <a class="dropdown-item" href="/android/app">Android app</a>
            </div>
          </li>
        
          <li class="nav-item">
            <a class="nav-link" href="/about-me">About Me</a>
          </li></ul>
  </div>

  

  
    <div class="avatar-container">
      <div class="avatar-img-border">
        <a href="https://www.blocknot.es/">
          <img alt="Navigation bar avatar" class="avatar-img" src="/assets/img/logo_sm.png" />
        </a>
      </div>
    </div>
  

</nav>


  <!-- TODO this file has become a mess, refactor it -->







<header class="header-section ">

<div class="intro-header no-img">
  <div class="container-md">
    <div class="row">
      <div class="col-md-10 offset-md-1 text-center">
        <div class="post-heading">
          <h1>Vagrant Rails 6 dev environment setup</h1>
          

          
            <span class="post-meta">Posted on January 5, 2021</span>
            
            
          
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class=" container-md ">
  <div class="row">
    <div class="col-xl-4 col-lg-2 order-1 order-md-2">
      
<!-- AdSense -->
<div id="adsense">
  <!-- <div class="btn-close">X</div> -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-2139312010639681"
       data-ad-slot="6706524257"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>


    </div>

    <div class=" col-xl-8 col-lg-10  order-2 order-md-1">
      

      

      <article role="main" class="blog-post">
        <p>Good news, everyone!<br />
Recently I made some experiments to setup a Rails 6 dev environment using Vagrant.<br />
I started from <a href="https://github.com/rails/rails-dev-box">rails/rails-dev-box</a> and applied some changes.</p>

<h2 id="vm-setup">VM Setup</h2>

<p>These are the features of the Vagrant file that I’m using:</p>
<ul>
  <li>Ubuntu 18.04 LTS box;</li>
  <li>ability to install different ruby versions;</li>
  <li>project files (placed in <strong>./project</strong>) kept in sync using <em>rsync</em>.</li>
</ul>

<p><em>Vagrantfile</em> (which I keep in <strong>./_vagrant</strong> directory):</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Vagrant</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="s1">'2'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">box</span>      <span class="o">=</span> <span class="s1">'ubuntu/bionic64'</span> <span class="c1"># 18.04 LTS</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">hostname</span> <span class="o">=</span> <span class="s1">'my-project'</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">network</span> <span class="ss">:forwarded_port</span><span class="p">,</span> <span class="ss">guest: </span><span class="mi">3000</span><span class="p">,</span> <span class="ss">host: </span><span class="mi">3000</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">provider</span> <span class="s1">'virtualbox'</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
    <span class="c1"># vb.check_guest_additions = false</span>
    <span class="n">vb</span><span class="p">.</span><span class="nf">gui</span>    <span class="o">=</span> <span class="kp">true</span>
    <span class="n">vb</span><span class="p">.</span><span class="nf">memory</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="s1">'RAILS_DEV_BOX_RAM'</span><span class="p">,</span> <span class="mi">4096</span><span class="p">).</span><span class="nf">to_i</span>
    <span class="n">vb</span><span class="p">.</span><span class="nf">name</span>   <span class="o">=</span> <span class="s1">'my-project'</span>
    <span class="n">vb</span><span class="p">.</span><span class="nf">cpus</span>   <span class="o">=</span> <span class="no">ENV</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="s1">'RAILS_DEV_BOX_CPUS'</span><span class="p">,</span> <span class="mi">2</span><span class="p">).</span><span class="nf">to_i</span>
  <span class="k">end</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">provision</span> <span class="s1">'shell'</span> <span class="k">do</span> <span class="o">|</span><span class="n">sh</span><span class="o">|</span>
    <span class="n">sh</span><span class="p">.</span><span class="nf">env</span>        <span class="o">=</span> <span class="p">{</span> <span class="s1">'RUBY_VERSION'</span> <span class="o">=&gt;</span> <span class="s1">'2.7.2'</span><span class="p">,</span> <span class="s1">'SWAP_SIZE'</span> <span class="o">=&gt;</span> <span class="s1">'2G'</span> <span class="p">}</span>
    <span class="n">sh</span><span class="p">.</span><span class="nf">keep_color</span> <span class="o">=</span> <span class="kp">true</span>
    <span class="n">sh</span><span class="p">.</span><span class="nf">path</span>       <span class="o">=</span> <span class="s1">'bootstrap.sh'</span>
    <span class="n">sh</span><span class="p">.</span><span class="nf">privileged</span> <span class="o">=</span> <span class="kp">false</span>
  <span class="k">end</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">synced_folder</span> <span class="s1">'./project'</span><span class="p">,</span> <span class="s1">'/project'</span><span class="p">,</span> <span class="ss">type: </span><span class="s1">'rsync'</span><span class="p">,</span> <span class="ss">rsync__exclude: </span><span class="p">[</span><span class="s1">'.git/'</span><span class="p">]</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="dev-environment-setup">Dev Environment Setup:</h2>

<p>Main features:</p>
<ul>
  <li>RVM setup + Ruby install;</li>
  <li>chromedriver to run feature specs;</li>
  <li>install NodeJS (14.x) using nodesource.com;</li>
</ul>

<p><em>bootstrap.sh</em>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>

<span class="c"># Suppress command output and exit on error</span>
<span class="k">function </span>check_result <span class="o">{</span>
  <span class="nb">echo</span> <span class="s2">"--- </span><span class="nv">$1</span><span class="s2"> ---"</span>
  <span class="nb">shift</span>
  <span class="nv">$@</span> <span class="o">&gt;</span> /dev/null
  <span class="nv">result</span><span class="o">=</span><span class="nv">$?</span>
  <span class="nb">test</span> <span class="nv">$result</span> <span class="nt">-eq</span> 0 <span class="o">||</span> <span class="se">\</span>
    <span class="o">{</span> <span class="nb">echo</span> <span class="s2">"!!! error: </span><span class="nv">$result</span><span class="s2">"</span><span class="p">;</span> <span class="nb">exit</span> <span class="nv">$result</span><span class="p">;</span> <span class="o">}</span>
<span class="o">}</span>

<span class="c"># Suppress installation steps output</span>
<span class="k">function </span>apt_install <span class="o">{</span>
  <span class="nb">echo</span> <span class="s2">"--- Installing </span><span class="nv">$1</span><span class="s2"> ---"</span>
  <span class="nb">shift
  sudo </span>apt <span class="nt">-y</span> <span class="nb">install</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span> <span class="o">&gt;</span>/dev/null 2&gt;&amp;1
<span class="o">}</span>

<span class="nb">echo</span> <span class="s1">'~~~ Bootstrap script ~~~'</span>

<span class="nb">echo</span> <span class="s1">'--- Adding swap file ---'</span>
<span class="nb">sudo </span>fallocate <span class="nt">-l</span> <span class="nv">$SWAP_SIZE</span> /swapfile
<span class="nb">sudo chmod </span>600 /swapfile
<span class="nb">sudo </span>mkswap /swapfile
<span class="nb">sudo </span>swapon /swapfile
<span class="nb">echo</span> <span class="s1">'/swapfile none swap defaults 0 0'</span> | <span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/fstab

<span class="c"># Prevents "Warning: apt-key output should not be parsed (stdout is not a terminal)".</span>
<span class="nb">export </span><span class="nv">APT_KEY_DONT_WARN_ON_DANGEROUS_USAGE</span><span class="o">=</span>1
curl <span class="nt">-sS</span> https://dl.yarnpkg.com/debian/pubkey.gpg | <span class="nb">sudo</span> <span class="nt">-E</span> apt-key add -
<span class="nb">echo</span> <span class="s2">"deb https://dl.yarnpkg.com/debian/ stable main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/yarn.list

check_result <span class="s1">'Updating package information'</span> <span class="nb">sudo </span>apt-get <span class="nt">-y</span> update

apt_install <span class="s1">'development tools'</span> build-essential autoconf libtool

<span class="nb">echo</span> <span class="s1">'--- Setup RVM ---'</span>
<span class="nb">echo </span>silent <span class="o">&gt;&gt;</span> ~/.curlrc
check_result <span class="s1">'Add RVM key'</span> gpg <span class="nt">--keyserver</span> hkp://pool.sks-keyservers.net <span class="nt">--recv-keys</span> 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB
<span class="se">\c</span>url <span class="nt">-sSL</span> https://get.rvm.io | check_result <span class="s1">'Installing RVM'</span> bash <span class="nt">-s</span> stable

<span class="nb">source</span> <span class="nv">$HOME</span>/.rvm/scripts/rvm
check_result <span class="s2">"Installing Ruby </span><span class="nv">$RUBY_VERSION</span><span class="s2">"</span> rvm <span class="nb">install</span> <span class="nv">$RUBY_VERSION</span>

check_result <span class="s1">'Update Ruby gems'</span> gem update <span class="nt">--system</span> <span class="nt">-N</span>
check_result <span class="s1">'Installing Bundler'</span> gem <span class="nb">install </span>bundler <span class="nt">-N</span>

apt_install Git git
apt_install SQLite sqlite3 libsqlite3-dev
apt_install Redis redis-server
apt_install <span class="s1">'Nokogiri dependencies'</span> libxml2 libxml2-dev libxslt1-dev
apt_install <span class="s1">'chromedriver'</span> chromium-driver

<span class="c"># PostgreSQL setup</span>
apt_install PostgreSQL postgresql postgresql-contrib libpq-dev
<span class="nb">sudo</span> <span class="nt">-u</span> postgres createuser <span class="nt">--superuser</span> vagrant
<span class="nb">cat</span> <span class="o">&gt;</span> /tmp/pg.conf <span class="o">&lt;&lt;-</span> <span class="no">EOF</span><span class="sh">
local   all             postgres                                trust
local   all             all                                     trust
local   replication     all                                     trust
host    all             all             127.0.0.1/32            trust
host    all             all             ::1/128                 trust
host    replication     all             127.0.0.1/32            trust
host    replication     all             ::1/128                 trust
</span><span class="no">EOF
</span><span class="nb">sudo cp</span> /tmp/pg.conf /etc/postgresql/10/main/pg_hba.conf
<span class="nb">sudo </span>systemctl restart postgresql

<span class="c"># NodeJS setup</span>
curl <span class="nt">-sL</span> https://deb.nodesource.com/setup_14.x | check_result <span class="s1">'Update NodeJS sources'</span> <span class="nb">sudo </span>bash -
apt_install <span class="s1">'NodeJS'</span> nodejs yarn

<span class="c"># Setup locales</span>
<span class="nb">sudo </span>update-locale <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LANGUAGE</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8

<span class="c"># Shell utils</span>
<span class="nb">cat</span> <span class="o">&gt;&gt;</span> <span class="nv">$HOME</span>/.bashrc <span class="o">&lt;&lt;-</span> <span class="no">EOF</span><span class="sh">
alias be="bundle exec"
export DB_HOST="localhost"
export REDIS_URL="redis://localhost:6379/0"
export CHROMEDRIVER_PATH="`which chromedriver`"
cd /project
</span><span class="no">EOF

</span><span class="nb">echo</span> <span class="s1">'--- Project setup ---'</span>
<span class="nb">source</span> <span class="nv">$HOME</span>/.bashrc
<span class="nb">cd</span> /project
check_result <span class="s1">'bundle install'</span> bundle <span class="nb">install
</span>check_result <span class="s1">'yarn install'</span> yarn <span class="nb">install</span> <span class="nt">--check-files</span>
check_result <span class="s1">'rails db:reset'</span> bin/rails db:reset

<span class="nb">echo</span> <span class="s1">'~~~ Ready! ~~~'</span>
</code></pre></div></div>

<h3 id="customizations">Customizations</h3>

<p>To setup MySQL in place of PostgreSQL:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>debconf-set-selections <span class="o">&lt;&lt;&lt;</span> <span class="s1">'mysql-server mysql-server/root_password password root'</span>
debconf-set-selections <span class="o">&lt;&lt;&lt;</span> <span class="s1">'mysql-server mysql-server/root_password_again password root'</span>
<span class="nb">install </span>MySQL mysql-server libmysqlclient-dev libssl-dev
<span class="c"># Set the password in an environment variable to avoid the warning issued if set with `-p`.</span>
<span class="nv">MYSQL_PWD</span><span class="o">=</span>root mysql <span class="nt">-uroot</span> <span class="o">&lt;&lt;</span><span class="no">SQL</span><span class="sh">
CREATE USER 'rails'@'localhost';
</span><span class="no">SQL
</span></code></pre></div></div>

<p>To install ASDF in place of RVM:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/asdf-vm/asdf.git <span class="nv">$HOME</span>/.asdf <span class="nt">--branch</span> v0.8.0
<span class="nb">.</span> <span class="nv">$HOME</span>/.asdf/asdf.sh
asdf plugin-add ruby https://github.com/asdf-vm/asdf-ruby.git
asdf <span class="nb">install </span>ruby 2.7.2
</code></pre></div></div>

<h2 id="project-setup">Project Setup</h2>

<p>The database configuration is pretty standard - <em>project/config/database.yml</em>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">default</span><span class="pi">:</span> <span class="nl">&amp;default</span>
  <span class="na">adapter</span><span class="pi">:</span> <span class="s">postgresql</span>
  <span class="na">pool</span><span class="pi">:</span> <span class="s">&lt;%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %&gt;</span>
  <span class="na">timeout</span><span class="pi">:</span> <span class="m">5000</span>

<span class="na">development</span><span class="pi">:</span>
  <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">db_development</span>

<span class="na">test</span><span class="pi">:</span>
  <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">db_test</span>
</code></pre></div></div>

<p>Selenium configuration for RSpec (for feature and system specs) - <em>project/spec/support/selenium.rb</em>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Capybara</span><span class="p">.</span><span class="nf">register_driver</span> <span class="ss">:selenium_chrome_headless</span> <span class="k">do</span> <span class="o">|</span><span class="n">app</span><span class="o">|</span>
  <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Chrome</span><span class="o">::</span><span class="no">Service</span><span class="p">.</span><span class="nf">driver_path</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'CHROMEDRIVER_PATH'</span><span class="p">]</span> <span class="k">if</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'CHROMEDRIVER_PATH'</span><span class="p">]</span>
  <span class="n">capabilities</span> <span class="o">=</span> <span class="o">::</span><span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Remote</span><span class="o">::</span><span class="no">Capabilities</span><span class="p">.</span><span class="nf">chrome</span><span class="p">(</span>
    <span class="s1">'goog:chromeOptions'</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="s1">'args'</span><span class="p">:</span> <span class="sx">%w[disable-dev-shm-usage disable-gpu headless no-sandbox window-size=1600,1000]</span>
    <span class="p">}</span>
  <span class="p">)</span>
  <span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">browser: :chrome</span><span class="p">,</span>
    <span class="ss">desired_capabilities: </span><span class="n">capabilities</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="no">Capybara</span><span class="o">::</span><span class="no">Selenium</span><span class="o">::</span><span class="no">Driver</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
<span class="k">end</span>

<span class="no">RSpec</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">before</span><span class="p">(</span><span class="ss">:each</span><span class="p">,</span> <span class="ss">type: :feature</span><span class="p">,</span> <span class="ss">js: </span><span class="kp">true</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">_spec</span><span class="o">|</span>
    <span class="no">Capybara</span><span class="p">.</span><span class="nf">current_driver</span> <span class="o">=</span> <span class="ss">:selenium_chrome_headless</span>
    <span class="no">Capybara</span><span class="p">.</span><span class="nf">javascript_driver</span> <span class="o">=</span> <span class="ss">:selenium_chrome_headless</span>
  <span class="k">end</span>

  <span class="n">config</span><span class="p">.</span><span class="nf">before</span><span class="p">(</span><span class="ss">:each</span><span class="p">,</span> <span class="ss">type: :system</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">driven_by</span><span class="p">(</span><span class="ss">:selenium_chrome_headless</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<ul>
  <li>Start the machine (and create the machine the first time): <code class="highlighter-rouge">vagrant up</code></li>
  <li>Enter in the machine: <code class="highlighter-rouge">vagrant ssh</code></li>
  <li>Start the server (then point the browser to <strong>localhost:3000</strong>): <code class="highlighter-rouge">bin/rails s -b 0.0.0.0</code></li>
  <li>Watch for changes (in another shell): <code class="highlighter-rouge">vagrant rsync-auto</code></li>
  <li>Stop the machine: <code class="highlighter-rouge">vagrant halt</code></li>
  <li>Destroy the machine (and delete the VM): <code class="highlighter-rouge">vagrant destroy</code></li>
</ul>

      </article>

      
        <div class="blog-tags">
          <span>Tags:</span>
          
            <a href="/tags#ruby">ruby</a>
          
            <a href="/tags#rails">rails</a>
          
        </div>
      

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
    <a href="https://twitter.com/intent/tweet?text=Vagrant+Rails+6+dev+environment+setup&url=https%3A%2F%2Fwww.blocknot.es%2F2021-01-05-vagrant-rails-6-dev-environment%2F"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fab fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.blocknot.es%2F2021-01-05-vagrant-rails-6-dev-environment%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fab fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fwww.blocknot.es%2F2021-01-05-vagrant-rails-6-dev-environment%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fab fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

  

</section>



      

      <ul class="pagination blog-pager">
        
        <li class="page-item previous">
          <a class="page-link" href="/2020-09-01-administrate-materialize-theme/" data-toggle="tooltip" data-placement="top" title="Administrate Materialize Theme">&larr; Previous Post</a>
        </li>
        
        
      </ul>
      
  <div class="disqus-comments">
  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
    var disqus_shortname = 'www-blocknot-es';
    /* ensure that pages with query string get the same discussion */
    var url_parts = window.location.href.split("?");
    var disqus_url = url_parts[0];
    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</div>
  
  

  




    </div>
  </div>
</div>


  <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      <ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a href="/feed.xml" title="RSS">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">RSS</span>
    </a>
  </li><li class="list-inline-item">
    <a href="mailto:mat@blocknot.es" title="Email me">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Email me</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://github.com/blocknotes" title="GitHub">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-github fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">GitHub</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://twitter.com/too_sleepy" title="Twitter">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">Twitter</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://stackoverflow.com/users/2627246/mat" title="StackOverflow">
      <span class="fa-stack fa-lg" aria-hidden="true">
        <i class="fas fa-circle fa-stack-2x"></i>
        <i class="fab fa-stack-overflow fa-stack-1x fa-inverse"></i>
      </span>
      <span class="sr-only">StackOverflow</span>
   </a>
  </li></ul>

      
      <p class="copyright text-muted">
      
        Mattia Roccoberton
        &nbsp;&bull;&nbsp;
      
      2021

      
        &nbsp;&bull;&nbsp;
        <span class="author-site">
          <a href="https://www.blocknot.es/">blocknot.es</a>
        </span>
      

      
      </p>
      <p class="theme-by text-muted">
        Powered by
        <a href="https://beautifuljekyll.com">Beautiful Jekyll</a>
      </p>
      </div>
    </div>
  </div>
</footer>


  
  
    
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/beautifuljekyll.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/main.js"></script>
    
  









</body>
</html>
