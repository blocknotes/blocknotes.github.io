<!DOCTYPE html>
<html lang="en">
<!-- Beautiful Jekyll 5.0.0 | Copyright Dean Attali 2020 -->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  

  

  <title>Vagrant Rails 6 dev environment setup</title>

  <link rel="preconnect" href="https://fonts.gstatic.com">
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,300;0,400;0,500;0,700;0,900;1,400&display=swap" rel="stylesheet">


  
  <meta name="author" content="Mattia Roccoberton">
  

  <meta name="description" content="Good news, everyone! Recently I made some experiments to setup a Rails 6 dev environment using Vagrant. I started from rails/rails-dev-box and applied some changes. VM Setup These are the features of the Vagrant file that I’m using: Ubuntu 18.04 LTS box; ability to install different ruby versions; project files...">

  

  
  <meta name="keywords" content="ruby on rails,ruby language,development">
  

  <link rel="alternate" type="application/rss+xml" title="blocknot.es" href="https://www.blocknot.es/feed.xml">

  
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-39592458-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-39592458-1');
</script>


  

  


  
    
      
  <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">


    
  

  
    
      <link rel="stylesheet" href="/assets/css/bootstrap-social.css">
    
      <link rel="stylesheet" href="/assets/css/pygment_highlights.css">
    
      <link rel="stylesheet" href="/assets/css/beautifuljekyll.css">
    
      <link rel="stylesheet" href="/assets/css/main.css">
    
  

  

  
  
  

  

  
  <meta property="og:site_name" content="blocknot.es">
  <meta property="og:title" content="Vagrant Rails 6 dev environment setup">
  <meta property="og:description" content="Good news, everyone! Recently I made some experiments to setup a Rails 6 dev environment using Vagrant. I started from rails/rails-dev-box and applied some changes. VM Setup These are the features of the Vagrant file that I’m using: Ubuntu 18.04 LTS box; ability to install different ruby versions; project files...">

  
  <meta property="og:image" content="https://www.blocknot.es/assets/img/logo_sm.png">
  

  
  <meta property="og:type" content="article">
  <meta property="og:article:author" content="Mattia Roccoberton">
  <meta property="og:article:published_time" content="2021-01-05T00:00:00+01:00">
  <meta property="og:url" content="https://www.blocknot.es/2021-01-05-vagrant-rails-6-dev-environment/">
  <link rel="canonical" href="https://www.blocknot.es/2021-01-05-vagrant-rails-6-dev-environment/">
  

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:site" content="@too_sleepy">
  <meta name="twitter:creator" content="@too_sleepy">

  <meta property="twitter:title" content="Vagrant Rails 6 dev environment setup">
  <meta property="twitter:description" content="Good news, everyone! Recently I made some experiments to setup a Rails 6 dev environment using Vagrant. I started from rails/rails-dev-box and applied some changes. VM Setup These are the features of the Vagrant file that I’m using: Ubuntu 18.04 LTS box; ability to install different ruby versions; project files...">

  
  <meta name="twitter:image" content="https://www.blocknot.es/assets/img/logo_sm.png">
  

  


  

  
</head>


<body>

  


  <nav class="navbar navbar-expand-xl navbar-light fixed-top navbar-custom top-nav-regular"><a class="navbar-brand" href="https://www.blocknot.es/">blocknot.es</a><button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="main-navbar">
    <ul class="navbar-nav ml-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">My projects</a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item" href="https://github.com/blocknotes?utf8=%E2%9C%93&tab=repositories&type=source">Github projects</a>
                  <a class="dropdown-item" href="/ruby/gems">Ruby gems</a>
                  <a class="dropdown-item" href="/android/app">Android app</a>
            </div>
          </li>
        
          <li class="nav-item">
            <a class="nav-link" href="/about-me">About Me</a>
          </li></ul>
  </div>

  

  
    <div class="avatar-container">
      <div class="avatar-img-border">
        <a href="https://www.blocknot.es/">
          <img alt="Navigation bar avatar" class="avatar-img" src="/assets/img/logo_sm.png" />
        </a>
      </div>
    </div>
  

</nav>


  <!-- TODO this file has become a mess, refactor it -->







<header class="header-section ">

<div class="intro-header no-img">
  <div class="container-md">
    <div class="row">
      <div class="col-md-10 offset-md-1 text-center">
        <div class="post-heading">
          <h1>Vagrant Rails 6 dev environment setup</h1>
          

          
            <span class="post-meta">Posted on January 5, 2021</span>
            
            
          
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class=" container-md ">
  <div class="row">
    <div class="col-xl-4 col-lg-2 order-1 order-md-2">
      
<!-- AdSense -->
<div id="adsense">
  <!-- <div class="btn-close">X</div> -->
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-2139312010639681"
       data-ad-slot="6706524257"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
</div>


    </div>

    <div class=" col-xl-8 col-lg-10  order-2 order-md-1">
      

      

      <article role="main" class="blog-post">
        <p>Good news, everyone!<br />
Recently I made some experiments to setup a Rails 6 dev environment using Vagrant.<br />
I started from <a href="https://github.com/rails/rails-dev-box">rails/rails-dev-box</a> and applied some changes.</p>

<h2 id="vm-setup">VM Setup</h2>

<p>These are the features of the Vagrant file that I’m using:</p>
<ul>
  <li>Ubuntu 18.04 LTS box;</li>
  <li>ability to install different ruby versions;</li>
  <li>project files (placed in <strong>./project</strong>) kept in sync using <em>rsync</em>.</li>
</ul>

<p><em>Vagrantfile</em> (which I keep in <strong>./_vagrant</strong> directory):</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Vagrant</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="s1">'2'</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">box</span>      <span class="o">=</span> <span class="s1">'ubuntu/bionic64'</span> <span class="c1"># 18.04 LTS</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">hostname</span> <span class="o">=</span> <span class="s1">'my-project'</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">network</span> <span class="ss">:forwarded_port</span><span class="p">,</span> <span class="ss">guest: </span><span class="mi">3000</span><span class="p">,</span> <span class="ss">host: </span><span class="mi">3000</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">provider</span> <span class="s1">'virtualbox'</span> <span class="k">do</span> <span class="o">|</span><span class="n">vb</span><span class="o">|</span>
    <span class="c1"># vb.check_guest_additions = false</span>
    <span class="n">vb</span><span class="p">.</span><span class="nf">gui</span>    <span class="o">=</span> <span class="kp">true</span>
    <span class="n">vb</span><span class="p">.</span><span class="nf">memory</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="s1">'RAILS_DEV_BOX_RAM'</span><span class="p">,</span> <span class="mi">4096</span><span class="p">).</span><span class="nf">to_i</span>
    <span class="n">vb</span><span class="p">.</span><span class="nf">name</span>   <span class="o">=</span> <span class="s1">'my-project'</span>
    <span class="n">vb</span><span class="p">.</span><span class="nf">cpus</span>   <span class="o">=</span> <span class="no">ENV</span><span class="p">.</span><span class="nf">fetch</span><span class="p">(</span><span class="s1">'RAILS_DEV_BOX_CPUS'</span><span class="p">,</span> <span class="mi">2</span><span class="p">).</span><span class="nf">to_i</span>
  <span class="k">end</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">provision</span> <span class="s1">'shell'</span> <span class="k">do</span> <span class="o">|</span><span class="n">sh</span><span class="o">|</span>
    <span class="n">sh</span><span class="p">.</span><span class="nf">env</span>        <span class="o">=</span> <span class="p">{</span> <span class="s1">'RUBY_VERSION'</span> <span class="o">=&gt;</span> <span class="s1">'2.7.2'</span><span class="p">,</span> <span class="s1">'SWAP_SIZE'</span> <span class="o">=&gt;</span> <span class="s1">'2G'</span> <span class="p">}</span>
    <span class="n">sh</span><span class="p">.</span><span class="nf">keep_color</span> <span class="o">=</span> <span class="kp">true</span>
    <span class="n">sh</span><span class="p">.</span><span class="nf">path</span>       <span class="o">=</span> <span class="s1">'bootstrap.sh'</span>
    <span class="n">sh</span><span class="p">.</span><span class="nf">privileged</span> <span class="o">=</span> <span class="kp">false</span>
  <span class="k">end</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">vm</span><span class="p">.</span><span class="nf">synced_folder</span> <span class="s1">'./project'</span><span class="p">,</span> <span class="s1">'/project'</span><span class="p">,</span> <span class="ss">type: </span><span class="s1">'rsync'</span><span class="p">,</span> <span class="ss">rsync__exclude: </span><span class="p">[</span><span class="s1">'.git/'</span><span class="p">]</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="dev-environment-setup">Dev Environment Setup:</h2>

<p>Main features:</p>
<ul>
  <li>RVM setup + Ruby install;</li>
  <li>chromedriver to run feature specs;</li>
  <li>install NodeJS (14.x) using nodesource.com;</li>
</ul>

<p><em>bootstrap.sh</em>:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/usr/bin/env bash</span>

<span class="c"># Suppress command output and exit on error</span>
<span class="k">function </span>check_result <span class="o">{</span>
  <span class="nb">echo</span> <span class="s2">"--- </span><span class="nv">$1</span><span class="s2"> ---"</span>
  <span class="nb">shift</span>
  <span class="nv">$@</span> <span class="o">&gt;</span> /dev/null
  <span class="nv">result</span><span class="o">=</span><span class="nv">$?</span>
  <span class="nb">test</span> <span class="nv">$result</span> <span class="nt">-eq</span> 0 <span class="o">||</span> <span class="se">\</span>
    <span class="o">{</span> <span class="nb">echo</span> <span class="s2">"!!! error: </span><span class="nv">$result</span><span class="s2">"</span><span class="p">;</span> <span class="nb">exit</span> <span class="nv">$result</span><span class="p">;</span> <span class="o">}</span>
<span class="o">}</span>

<span class="c"># Suppress installation steps output</span>
<span class="k">function </span>apt_install <span class="o">{</span>
  <span class="nb">echo</span> <span class="s2">"--- Installing </span><span class="nv">$1</span><span class="s2"> ---"</span>
  <span class="nb">shift
  sudo </span>apt <span class="nt">-y</span> <span class="nb">install</span> <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span> <span class="o">&gt;</span>/dev/null 2&gt;&amp;1
<span class="o">}</span>

<span class="nb">echo</span> <span class="s1">'~~~ Bootstrap script ~~~'</span>

<span class="nb">echo</span> <span class="s1">'--- Adding swap file ---'</span>
<span class="nb">sudo </span>fallocate <span class="nt">-l</span> <span class="nv">$SWAP_SIZE</span> /swapfile
<span class="nb">sudo chmod </span>600 /swapfile
<span class="nb">sudo </span>mkswap /swapfile
<span class="nb">sudo </span>swapon /swapfile
<span class="nb">echo</span> <span class="s1">'/swapfile none swap defaults 0 0'</span> | <span class="nb">sudo tee</span> <span class="nt">-a</span> /etc/fstab

<span class="c"># Prevents "Warning: apt-key output should not be parsed (stdout is not a terminal)".</span>
<span class="nb">export </span><span class="nv">APT_KEY_DONT_WARN_ON_DANGEROUS_USAGE</span><span class="o">=</span>1
curl <span class="nt">-sS</span> https://dl.yarnpkg.com/debian/pubkey.gpg | <span class="nb">sudo</span> <span class="nt">-E</span> apt-key add -
<span class="nb">echo</span> <span class="s2">"deb https://dl.yarnpkg.com/debian/ stable main"</span> | <span class="nb">sudo tee</span> /etc/apt/sources.list.d/yarn.list

check_result <span class="s1">'Updating package information'</span> <span class="nb">sudo </span>apt-get <span class="nt">-y</span> update

apt_install <span class="s1">'development tools'</span> build-essential autoconf libtool

<span class="nb">echo</span> <span class="s1">'--- Setup RVM ---'</span>
<span class="nb">echo </span>silent <span class="o">&gt;&gt;</span> ~/.curlrc
check_result <span class="s1">'Add RVM key'</span> gpg <span class="nt">--keyserver</span> hkp://pool.sks-keyservers.net <span class="nt">--recv-keys</span> 409B6B1796C275462A1703113804BB82D39DC0E3 7D2BAF1CF37B13E2069D6956105BD0E739499BDB
<span class="se">\c</span>url <span class="nt">-sSL</span> https://get.rvm.io | check_result <span class="s1">'Installing RVM'</span> bash <span class="nt">-s</span> stable

<span class="nb">source</span> <span class="nv">$HOME</span>/.rvm/scripts/rvm
check_result <span class="s2">"Installing Ruby </span><span class="nv">$RUBY_VERSION</span><span class="s2">"</span> rvm <span class="nb">install</span> <span class="nv">$RUBY_VERSION</span>

check_result <span class="s1">'Update Ruby gems'</span> gem update <span class="nt">--system</span> <span class="nt">-N</span>
check_result <span class="s1">'Installing Bundler'</span> gem <span class="nb">install </span>bundler <span class="nt">-N</span>

apt_install Git git
apt_install SQLite sqlite3 libsqlite3-dev
apt_install Redis redis-server
apt_install <span class="s1">'Nokogiri dependencies'</span> libxml2 libxml2-dev libxslt1-dev
apt_install <span class="s1">'chromedriver'</span> chromium-driver

<span class="c"># PostgreSQL setup</span>
apt_install PostgreSQL postgresql postgresql-contrib libpq-dev
<span class="nb">sudo</span> <span class="nt">-u</span> postgres createuser <span class="nt">--superuser</span> vagrant
<span class="nb">cat</span> <span class="o">&gt;</span> /tmp/pg.conf <span class="o">&lt;&lt;-</span> <span class="no">EOF</span><span class="sh">
local   all             postgres                                trust
local   all             all                                     trust
local   replication     all                                     trust
host    all             all             127.0.0.1/32            trust
host    all             all             ::1/128                 trust
host    replication     all             127.0.0.1/32            trust
host    replication     all             ::1/128                 trust
</span><span class="no">EOF
</span><span class="nb">sudo cp</span> /tmp/pg.conf /etc/postgresql/10/main/pg_hba.conf
<span class="nb">sudo </span>systemctl restart postgresql

<span class="c"># NodeJS setup</span>
curl <span class="nt">-sL</span> https://deb.nodesource.com/setup_14.x | check_result <span class="s1">'Update NodeJS sources'</span> <span class="nb">sudo </span>bash -
apt_install <span class="s1">'NodeJS'</span> nodejs yarn

<span class="c"># Setup locales</span>
<span class="nb">sudo </span>update-locale <span class="nv">LANG</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LANGUAGE</span><span class="o">=</span>en_US.UTF-8 <span class="nv">LC_ALL</span><span class="o">=</span>en_US.UTF-8

<span class="c"># Shell utils</span>
<span class="nb">cat</span> <span class="o">&gt;&gt;</span> <span class="nv">$HOME</span>/.bashrc <span class="o">&lt;&lt;-</span> <span class="no">EOF</span><span class="sh">
alias be="bundle exec"
export DB_HOST="localhost"
export REDIS_URL="redis://localhost:6379/0"
export CHROMEDRIVER_PATH="`which chromedriver`"
cd /project
</span><span class="no">EOF

</span><span class="nb">echo</span> <span class="s1">'--- Project setup ---'</span>
<span class="nb">source</span> <span class="nv">$HOME</span>/.bashrc
<span class="nb">cd</span> /project
check_result <span class="s1">'bundle install'</span> bundle <span class="nb">install
</span>check_result <span class="s1">'yarn install'</span> yarn <span class="nb">install</span> <span class="nt">--check-files</span>
check_result <span class="s1">'rails db:reset'</span> bin/rails db:reset

<span class="nb">echo</span> <span class="s1">'~~~ Ready! ~~~'</span>
</code></pre></div></div>

<h3 id="customizations">Customizations</h3>

<p>To setup MySQL in place of PostgreSQL:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>debconf-set-selections <span class="o">&lt;&lt;&lt;</span> <span class="s1">'mysql-server mysql-server/root_password password root'</span>
debconf-set-selections <span class="o">&lt;&lt;&lt;</span> <span class="s1">'mysql-server mysql-server/root_password_again password root'</span>
<span class="nb">install </span>MySQL mysql-server libmysqlclient-dev libssl-dev
<span class="c"># Set the password in an environment variable to avoid the warning issued if set with `-p`.</span>
<span class="nv">MYSQL_PWD</span><span class="o">=</span>root mysql <span class="nt">-uroot</span> <span class="o">&lt;&lt;</span><span class="no">SQL</span><span class="sh">
CREATE USER 'rails'@'localhost';
</span><span class="no">SQL
</span></code></pre></div></div>

<p>To install ASDF in place of RVM:</p>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/asdf-vm/asdf.git <span class="nv">$HOME</span>/.asdf <span class="nt">--branch</span> v0.8.0
<span class="nb">.</span> <span class="nv">$HOME</span>/.asdf/asdf.sh
asdf plugin-add ruby https://github.com/asdf-vm/asdf-ruby.git
asdf <span class="nb">install </span>ruby 2.7.2
</code></pre></div></div>

<h2 id="project-setup">Project Setup</h2>

<p>The database configuration is pretty standard - <em>project/config/database.yml</em>:</p>

<div class="language-yaml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="na">default</span><span class="pi">:</span> <span class="nl">&amp;default</span>
  <span class="na">adapter</span><span class="pi">:</span> <span class="s">postgresql</span>
  <span class="na">pool</span><span class="pi">:</span> <span class="s">&lt;%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %&gt;</span>
  <span class="na">timeout</span><span class="pi">:</span> <span class="m">5000</span>

<span class="na">development</span><span class="pi">:</span>
  <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">db_development</span>

<span class="na">test</span><span class="pi">:</span>
  <span class="s">&lt;&lt;</span><span class="pi">:</span> <span class="nv">*default</span>
  <span class="na">database</span><span class="pi">:</span> <span class="s">db_test</span>
</code></pre></div></div>

<p>Selenium configuration for RSpec (for feature and system specs) - <em>project/spec/support/selenium.rb</em>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Capybara</span><span class="p">.</span><span class="nf">register_driver</span> <span class="ss">:selenium_chrome_headless</span> <span class="k">do</span> <span class="o">|</span><span class="n">app</span><span class="o">|</span>
  <span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Chrome</span><span class="o">::</span><span class="no">Service</span><span class="p">.</span><span class="nf">driver_path</span> <span class="o">=</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'CHROMEDRIVER_PATH'</span><span class="p">]</span> <span class="k">if</span> <span class="no">ENV</span><span class="p">[</span><span class="s1">'CHROMEDRIVER_PATH'</span><span class="p">]</span>
  <span class="n">capabilities</span> <span class="o">=</span> <span class="o">::</span><span class="no">Selenium</span><span class="o">::</span><span class="no">WebDriver</span><span class="o">::</span><span class="no">Remote</span><span class="o">::</span><span class="no">Capabilities</span><span class="p">.</span><span class="nf">chrome</span><span class="p">(</span>
    <span class="s1">'goog:chromeOptions'</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="s1">'args'</span><span class="p">:</span> <span class="sx">%w[disable-dev-shm-usage disable-gpu headless no-sandbox window-size=1600,1000]</span>
    <span class="p">}</span>
  <span class="p">)</span>
  <span class="n">options</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">browser: :chrome</span><span class="p">,</span>
    <span class="ss">desired_capabilities: </span><span class="n">capabilities</span><span class="p">,</span>
  <span class="p">}</span>
  <span class="no">Capybara</span><span class="o">::</span><span class="no">Selenium</span><span class="o">::</span><span class="no">Driver</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">app</span><span class="p">,</span> <span class="n">options</span><span class="p">)</span>
<span class="k">end</span>

<span class="no">RSpec</span><span class="p">.</span><span class="nf">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">before</span><span class="p">(</span><span class="ss">:each</span><span class="p">,</span> <span class="ss">type: :feature</span><span class="p">,</span> <span class="ss">js: </span><span class="kp">true</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">_spec</span><span class="o">|</span>
    <span class="no">Capybara</span><span class="p">.</span><span class="nf">current_driver</span> <span class="o">=</span> <span class="ss">:selenium_chrome_headless</span>
    <span class="no">Capybara</span><span class="p">.</span><span class="nf">javascript_driver</span> <span class="o">=</span> <span class="ss">:selenium_chrome_headless</span>
  <span class="k">end</span>

  <span class="n">config</span><span class="p">.</span><span class="nf">before</span><span class="p">(</span><span class="ss">:each</span><span class="p">,</span> <span class="ss">type: :system</span><span class="p">)</span> <span class="k">do</span>
    <span class="n">driven_by</span><span class="p">(</span><span class="ss">:selenium_chrome_headless</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<h2 id="usage">Usage</h2>

<ul>
  <li>Start the machine (and create the machine the first time): <code class="highlighter-rouge">vagrant up</code></li>
  <li>Enter in the machine: <code class="highlighter-rouge">vagrant ssh</code></li>
  <li>Start the server (then point the browser to <strong>localhost:3000</strong>): <code class="highlighter-rouge">bin/rails s -b 0.0.0.0</code></li>
  <li>Watch for changes (in another shell): <code class="highlighter-rouge">vagrant rsync-auto</code></li>
  <li>Stop the machine: <code class="highlighter-rouge">vagrant halt</code></li>
  <li>Destroy the machine (and delete the VM): <code class="highlighter-rouge">vagrant destroy</code></li>
</ul>

      </article>

      
        <div class="blog-tags">
          <span>Tags:</span>
          
            <a href="/tags#ruby">ruby</a>
          
            <a href="/tags#rails">rails</a>
          
        </div>
      

      

      
        <!-- Check if any share-links are active -->




<section id = "social-share-section">
  <span class="sr-only">Share: </span>

  
    <a href="https://twitter.com/intent/tweet?text=Vagrant+Rails+6+dev+environment+setup&url=https%3A%2F%2Fwww.blocknot.es%2F2021-01-05-vagrant-rails-6-dev-environment%2F"
      class="btn btn-social-icon btn-twitter" title="Share on Twitter">
      <span class="fab fa-fw fa-twitter" aria-hidden="true"></span>
      <span class="sr-only">Twitter</span>
    </a>
  

  
    <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fwww.blocknot.es%2F2021-01-05-vagrant-rails-6-dev-environment%2F"
      class="btn btn-social-icon btn-facebook" title="Share on Facebook">
      <span class="fab fa-fw fa-facebook" aria-hidden="true"></span>
      <span class="sr-only">Facebook</span>
    </a>
  

  
    <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fwww.blocknot.es%2F2021-01-05-vagrant-rails-6-dev-environment%2F"
      class="btn btn-social-icon btn-linkedin" title="Share on LinkedIn">
      <span class="fab fa-fw fa-linkedin" aria-hidden="true"></span>
      <span class="sr-only">LinkedIn</span>
    </a>
  

  

</section>



      

      <ul class="pagination blog-pager">
        
        <li class="page-item previous">
          <a class="page-link" href="/2020-09-01-administrate-materialize-theme/" data-toggle="tooltip" data-placement="top" title="Administrate Materialize Theme">&larr; Previous Post</a>
        </li>
        
        
      </ul>
      
  <div class="disqus-comments">
  <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
    var disqus_shortname = 'www-blocknot-es';
    /* ensure that pages with query string get the same discussion */
    var url_parts = window.location.href.split("?");
    var disqus_url = url_parts[0];
    (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  </div>
</div>
  
  

  




    </div>
  </div>
</div>


  <footer>
  <div class="container-md beautiful-jekyll-footer">
    <div class="row">
      <div class="col-xl-8 offset-xl-2 col-lg-10 offset-lg-1">
      <ul class="list-inline text-center footer-links"><li class="list-inline-item">
    <a href="/feed.xml" title="RSS" class="svg-icon-md">
      <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="rss" class="svg-inline--fa fa-rss fa-w-14" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg>
      <span class="sr-only">RSS</span>
    </a>
  </li><li class="list-inline-item">
    <a href="mailto:mat@blocknot.es" title="Email me" class="svg-icon-md">
      <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M502.3 190.8c3.9-3.1 9.7-.2 9.7 4.7V400c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V195.6c0-5 5.7-7.8 9.7-4.7 22.4 17.4 52.1 39.5 154.1 113.6 21.1 15.4 56.7 47.8 92.2 47.6 35.7.3 72-32.8 92.3-47.6 102-74.1 131.6-96.3 154-113.7zM256 320c23.2.4 56.6-29.2 73.4-41.4 132.7-96.3 142.8-104.7 173.4-128.7 5.8-4.5 9.2-11.5 9.2-18.9v-19c0-26.5-21.5-48-48-48H48C21.5 64 0 85.5 0 112v19c0 7.4 3.4 14.3 9.2 18.9 30.6 23.9 40.7 32.4 173.4 128.7 16.8 12.2 50.2 41.8 73.4 41.4z"></path></svg>
      <span class="sr-only">Email me</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://github.com/blocknotes" title="GitHub" class="svg-icon-md">
      <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github" class="svg-inline--fa fa-github fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg>
      <span class="sr-only">GitHub</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://twitter.com/too_sleepy" title="Twitter" class="svg-icon-md">
      <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-w-16" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg>
      <span class="sr-only">Twitter</span>
   </a>
  </li><li class="list-inline-item">
    <a href="https://stackoverflow.com/users/2627246/mat" title="StackOverflow" class="svg-icon-md">
      <svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="stack-overflow" class="svg-inline--fa fa-stack-overflow fa-w-12" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path fill="currentColor" d="M290.7 311L95 269.7 86.8 309l195.7 41zm51-87L188.2 95.7l-25.5 30.8 153.5 128.3zm-31.2 39.7L129.2 179l-16.7 36.5L293.7 300zM262 32l-32 24 119.3 160.3 32-24zm20.5 328h-200v39.7h200zm39.7 80H42.7V320h-40v160h359.5V320h-40z"></path></svg>
      <span class="sr-only">StackOverflow</span>
   </a>
  </li></ul>

      
      <p class="copyright text-muted">
      
        Mattia Roccoberton
        &nbsp;&bull;&nbsp;
      
      2021

      
        &nbsp;&bull;&nbsp;
        <span class="author-site">
          <a href="https://www.blocknot.es/">blocknot.es</a>
        </span>
      

      
      </p>
      <p class="theme-by text-muted">
        Powered by
        <a href="https://beautifuljekyll.com">Beautiful Jekyll</a>
      </p>
      </div>
    </div>
  </div>
</footer>


  
  
    
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha256-4+XzXVhsDmqanXGHaHvgh1gMQKX40OUvDEBTu8JcmNs=" crossorigin="anonymous"></script>


  
    
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>


  
    
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>


  



  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/beautifuljekyll.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script src="/assets/js/main.js"></script>
    
  









</body>
</html>
